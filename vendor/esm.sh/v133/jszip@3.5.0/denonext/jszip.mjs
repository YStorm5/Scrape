/* esm.sh - esbuild bundle(jszip@3.5.0) denonext production */
import { Buffer as __Buffer$ } from "node:buffer";
import * as __0$ from "/v133/lie@3.3.0/denonext/lie.mjs";
import * as __1$ from "/v133/readable-stream@2.3.8/denonext/readable-stream.mjs";
import * as __2$ from "/v133/set-immediate-shim@1.0.1/denonext/set-immediate-shim.mjs";
import * as __3$ from "/v133/pako@1.0.11/denonext/pako.mjs";
import * as __4$ from "/v133/readable-stream@2.3.8/denonext/readable-stream.mjs";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"lie":return e(__0$);case"readable-stream":return e(__1$);case"set-immediate-shim":return e(__2$);case"pako":return e(__3$);default:throw new Error("module \""+n+"\" not found");}};
var Nt=Object.create;var Te=Object.defineProperty;var Wt=Object.getOwnPropertyDescriptor;var Zt=Object.getOwnPropertyNames;var Mt=Object.getPrototypeOf,jt=Object.prototype.hasOwnProperty;var Q=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var f=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Ht=(e,r)=>{for(var t in r)Te(e,t,{get:r[t],enumerable:!0})},Fe=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Zt(r))!jt.call(e,n)&&n!==t&&Te(e,n,{get:()=>r[n],enumerable:!(i=Wt(r,n))||i.enumerable});return e},P=(e,r,t)=>(Fe(e,r,"default"),t&&Fe(t,r,"default")),mr=(e,r,t)=>(t=e!=null?Nt(Mt(e)):{},Fe(r||!e||!e.__esModule?Te(t,"default",{value:e,enumerable:!0}):t,e));var k=f(v=>{"use strict";v.base64=!0;v.array=!0;v.string=!0;v.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";v.nodebuffer=typeof __Buffer$<"u";v.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")v.blob=!1;else{De=new ArrayBuffer(0);try{v.blob=new Blob([De],{type:"application/zip"}).size===0}catch{try{vr=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,Re=new vr,Re.append(De),v.blob=Re.getBlob("application/zip").size===0}catch{v.blob=!1}}}var De,vr,Re;try{v.nodestream=!!Q("readable-stream").Readable}catch{v.nodestream=!1}});var Pe=f(Be=>{"use strict";var Yt=l(),Xt=k(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Be.encode=function(e){for(var r=[],t,i,n,s,a,o,u,h=0,p=e.length,m=p,g=Yt.getTypeOf(e)!=="string";h<e.length;)m=p-h,g?(t=e[h++],i=h<p?e[h++]:0,n=h<p?e[h++]:0):(t=e.charCodeAt(h++),i=h<p?e.charCodeAt(h++):0,n=h<p?e.charCodeAt(h++):0),s=t>>2,a=(t&3)<<4|i>>4,o=m>1?(i&15)<<2|n>>6:64,u=m>2?n&63:64,r.push(_.charAt(s)+_.charAt(a)+_.charAt(o)+_.charAt(u));return r.join("")};Be.decode=function(e){var r,t,i,n,s,a,o,u=0,h=0,p="data:";if(e.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var m=e.length*3/4;if(e.charAt(e.length-1)===_.charAt(64)&&m--,e.charAt(e.length-2)===_.charAt(64)&&m--,m%1!==0)throw new Error("Invalid base64 input, bad content length.");var g;for(Xt.uint8array?g=new Uint8Array(m|0):g=new Array(m|0);u<e.length;)n=_.indexOf(e.charAt(u++)),s=_.indexOf(e.charAt(u++)),a=_.indexOf(e.charAt(u++)),o=_.indexOf(e.charAt(u++)),r=n<<2|s>>4,t=(s&15)<<4|a>>2,i=(a&3)<<6|o,g[h++]=r,a!==64&&(g[h++]=t),o!==64&&(g[h++]=i);return g}});var $=f((xn,yr)=>{"use strict";yr.exports={isNode:typeof __Buffer$<"u",newBufferFrom:function(e,r){if(__Buffer$.from&&__Buffer$.from!==Uint8Array.from)return __Buffer$.from(e,r);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new __Buffer$(e,r)},allocBuffer:function(e){if(__Buffer$.alloc)return __Buffer$.alloc(e);var r=new __Buffer$(e);return r.fill(0),r},isBuffer:function(e){return __Buffer$.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}});var M=f((Cn,gr)=>{"use strict";var qe=null;typeof Promise<"u"?qe=Promise:qe=Q("lie");gr.exports={Promise:qe}});var l=f(d=>{"use strict";var F=k(),Vt=Pe(),j=$(),Gt=Q("set-immediate-shim"),ze=M();function Kt(e){var r=null;return F.uint8array?r=new Uint8Array(e.length):r=new Array(e.length),oe(e,r)}d.newBlob=function(e,r){d.checkSupport("blob");try{return new Blob([e],{type:r})}catch{try{var t=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new t;return i.append(e),i.getBlob(r)}catch{throw new Error("Bug : can't construct the Blob.")}}};function ee(e){return e}function oe(e,r){for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)&255;return r}var ae={stringifyByChunk:function(e,r,t){var i=[],n=0,s=e.length;if(s<=t)return String.fromCharCode.apply(null,e);for(;n<s;)r==="array"||r==="nodebuffer"?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+t,s)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+t,s)))),n+=t;return i.join("")},stringifyByChar:function(e){for(var r="",t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},applyCanBeUsed:{uint8array:function(){try{return F.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return F.nodebuffer&&String.fromCharCode.apply(null,j.allocBuffer(1)).length===1}catch{return!1}}()}};function re(e){var r=65536,t=d.getTypeOf(e),i=!0;if(t==="uint8array"?i=ae.applyCanBeUsed.uint8array:t==="nodebuffer"&&(i=ae.applyCanBeUsed.nodebuffer),i)for(;r>1;)try{return ae.stringifyByChunk(e,t,r)}catch{r=Math.floor(r/2)}return ae.stringifyByChar(e)}d.applyFromCharCode=re;function ue(e,r){for(var t=0;t<e.length;t++)r[t]=e[t];return r}var T={};T.string={string:ee,array:function(e){return oe(e,new Array(e.length))},arraybuffer:function(e){return T.string.uint8array(e).buffer},uint8array:function(e){return oe(e,new Uint8Array(e.length))},nodebuffer:function(e){return oe(e,j.allocBuffer(e.length))}};T.array={string:re,array:ee,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return j.newBufferFrom(e)}};T.arraybuffer={string:function(e){return re(new Uint8Array(e))},array:function(e){return ue(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:ee,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return j.newBufferFrom(new Uint8Array(e))}};T.uint8array={string:re,array:function(e){return ue(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:ee,nodebuffer:function(e){return j.newBufferFrom(e)}};T.nodebuffer={string:re,array:function(e){return ue(e,new Array(e.length))},arraybuffer:function(e){return T.nodebuffer.uint8array(e).buffer},uint8array:function(e){return ue(e,new Uint8Array(e.length))},nodebuffer:ee};d.transformTo=function(e,r){if(r||(r=""),!e)return r;d.checkSupport(e);var t=d.getTypeOf(r),i=T[t][e](r);return i};d.getTypeOf=function(e){if(typeof e=="string")return"string";if(Object.prototype.toString.call(e)==="[object Array]")return"array";if(F.nodebuffer&&j.isBuffer(e))return"nodebuffer";if(F.uint8array&&e instanceof Uint8Array)return"uint8array";if(F.arraybuffer&&e instanceof ArrayBuffer)return"arraybuffer"};d.checkSupport=function(e){var r=F[e.toLowerCase()];if(!r)throw new Error(e+" is not supported by this platform")};d.MAX_VALUE_16BITS=65535;d.MAX_VALUE_32BITS=-1;d.pretty=function(e){var r="",t,i;for(i=0;i<(e||"").length;i++)t=e.charCodeAt(i),r+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();return r};d.delay=function(e,r,t){Gt(function(){e.apply(t||null,r||[])})};d.inherits=function(e,r){var t=function(){};t.prototype=r.prototype,e.prototype=new t};d.extend=function(){var e={},r,t;for(r=0;r<arguments.length;r++)for(t in arguments[r])arguments[r].hasOwnProperty(t)&&typeof e[t]>"u"&&(e[t]=arguments[r][t]);return e};d.prepareContent=function(e,r,t,i,n){var s=ze.Promise.resolve(r).then(function(a){var o=F.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1);return o&&typeof FileReader<"u"?new ze.Promise(function(u,h){var p=new FileReader;p.onload=function(m){u(m.target.result)},p.onerror=function(m){h(m.target.error)},p.readAsArrayBuffer(a)}):a});return s.then(function(a){var o=d.getTypeOf(a);return o?(o==="arraybuffer"?a=d.transformTo("uint8array",a):o==="string"&&(n?a=Vt.decode(a):t&&i!==!0&&(a=Kt(a))),a):ze.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}});var y=f((wn,Cr)=>{"use strict";function xr(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}xr.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,r){return this._listeners[e].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,r){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,r)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.end()}),e.on("error",function(t){r.error(t)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,r){return this.extraStreamInfo[e]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};Cr.exports=xr});var z=f(D=>{"use strict";var H=l(),q=k(),Jt=$(),fe=y(),te=new Array(256);for(I=0;I<256;I++)te[I]=I>=252?6:I>=248?5:I>=240?4:I>=224?3:I>=192?2:1;var I;te[254]=te[254]=1;var Qt=function(e){var r,t,i,n,s,a=e.length,o=0;for(n=0;n<a;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(q.uint8array?r=new Uint8Array(o):r=new Array(o),s=0,n=0;s<o;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),t<128?r[s++]=t:t<2048?(r[s++]=192|t>>>6,r[s++]=128|t&63):t<65536?(r[s++]=224|t>>>12,r[s++]=128|t>>>6&63,r[s++]=128|t&63):(r[s++]=240|t>>>18,r[s++]=128|t>>>12&63,r[s++]=128|t>>>6&63,r[s++]=128|t&63);return r},$t=function(e,r){var t;for(r=r||e.length,r>e.length&&(r=e.length),t=r-1;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+te[e[t]]>r?t:r},ei=function(e){var r,t,i,n,s,a=e.length,o=new Array(a*2);for(i=0,t=0;t<a;){if(n=e[t++],n<128){o[i++]=n;continue}if(s=te[n],s>4){o[i++]=65533,t+=s-1;continue}for(n&=s===2?31:s===3?15:7;s>1&&t<a;)n=n<<6|e[t++]&63,s--;if(s>1){o[i++]=65533;continue}n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|n&1023)}return o.length!==i&&(o.subarray?o=o.subarray(0,i):o.length=i),H.applyFromCharCode(o)};D.utf8encode=function(r){return q.nodebuffer?Jt.newBufferFrom(r,"utf-8"):Qt(r)};D.utf8decode=function(r){return q.nodebuffer?H.transformTo("nodebuffer",r).toString("utf-8"):(r=H.transformTo(q.uint8array?"uint8array":"array",r),ei(r))};function he(){fe.call(this,"utf-8 decode"),this.leftOver=null}H.inherits(he,fe);he.prototype.processChunk=function(e){var r=H.transformTo(q.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(q.uint8array){var t=r;r=new Uint8Array(t.length+this.leftOver.length),r.set(this.leftOver,0),r.set(t,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var i=$t(r),n=r;i!==r.length&&(q.uint8array?(n=r.subarray(0,i),this.leftOver=r.subarray(i,r.length)):(n=r.slice(0,i),this.leftOver=r.slice(i,r.length))),this.push({data:D.utf8decode(n),meta:e.meta})};he.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:D.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};D.Utf8DecodeWorker=he;function Le(){fe.call(this,"utf-8 encode")}H.inherits(Le,fe);Le.prototype.processChunk=function(e){this.push({data:D.utf8encode(e.data),meta:e.meta})};D.Utf8EncodeWorker=Le});var br=f((bn,Er)=>{"use strict";var Sr=y(),wr=l();function Ue(e){Sr.call(this,"ConvertWorker to "+e),this.destType=e}wr.inherits(Ue,Sr);Ue.prototype.processChunk=function(e){this.push({data:wr.transformTo(this.destType,e.data),meta:e.meta})};Er.exports=Ue});var kr=f((An,_r)=>{"use strict";var Ar=Q("readable-stream").Readable,ri=l();ri.inherits(Ne,Ar);function Ne(e,r,t){Ar.call(this,r),this._helper=e;var i=this;e.on("data",function(n,s){i.push(n)||i._helper.pause(),t&&t(s)}).on("error",function(n){i.emit("error",n)}).on("end",function(){i.push(null)})}Ne.prototype._read=function(){this._helper.resume()};_r.exports=Ne});var We=f((_n,Fr)=>{"use strict";var L=l(),ti=br(),ii=y(),ni=Pe(),si=k(),ai=M(),Ir=null;if(si.nodestream)try{Ir=kr()}catch{}function oi(e,r,t){switch(e){case"blob":return L.newBlob(L.transformTo("arraybuffer",r),t);case"base64":return ni.encode(r);default:return L.transformTo(e,r)}}function ui(e,r){var t,i=0,n=null,s=0;for(t=0;t<r.length;t++)s+=r[t].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(n=new Uint8Array(s),t=0;t<r.length;t++)n.set(r[t],i),i+=r[t].length;return n;case"nodebuffer":return __Buffer$.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}function fi(e,r){return new ai.Promise(function(t,i){var n=[],s=e._internalType,a=e._outputType,o=e._mimeType;e.on("data",function(u,h){n.push(u),r&&r(h)}).on("error",function(u){n=[],i(u)}).on("end",function(){try{var u=oi(a,ui(s,n),o);t(u)}catch(h){i(h)}n=[]}).resume()})}function Or(e,r,t){var i=r;switch(r){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string";break}try{this._internalType=i,this._outputType=r,this._mimeType=t,L.checkSupport(i),this._worker=e.pipe(new ti(i)),e.lock()}catch(n){this._worker=new ii("error"),this._worker.error(n)}}Or.prototype={accumulate:function(e){return fi(this,e)},on:function(e,r){var t=this;return e==="data"?this._worker.on(e,function(i){r.call(t,i.data,i.meta)}):this._worker.on(e,function(){L.delay(r,arguments,t)}),this},resume:function(){return L.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(L.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Ir(this,{objectMode:this._outputType!=="nodebuffer"},e)}};Fr.exports=Or});var Ze=f(S=>{"use strict";S.base64=!1;S.binary=!1;S.dir=!1;S.createFolders=!0;S.date=null;S.compression=null;S.compressionOptions=null;S.comment=null;S.unixPermissions=null;S.dosPermissions=null});var Me=f((In,Tr)=>{"use strict";var ce=l(),le=y(),hi=16*1024;function Y(e){le.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=ce.getTypeOf(t),r.isPaused||r._tickAndRepeat()},function(t){r.error(t)})}ce.inherits(Y,le);Y.prototype.cleanUp=function(){le.prototype.cleanUp.call(this),this.data=null};Y.prototype.resume=function(){return le.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ce.delay(this._tickAndRepeat,[],this)),!0):!1};Y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(ce.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};Y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=hi,r=null,t=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,t);break;case"uint8array":r=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":r=this.data.slice(this.index,t);break}return this.index=t,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})};Tr.exports=Y});var Ye=f((On,Dr)=>{"use strict";var ci=l(),je=y();function He(e){je.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}ci.inherits(He,je);He.prototype.processChunk=function(e){if(e){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+e.data.length}je.prototype.processChunk.call(this,e)};Dr.exports=He});var de=f((Fn,Br)=>{"use strict";var li=l();function di(){for(var e,r=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var Rr=di();function pi(e,r,t,i){var n=Rr,s=i+t;e=e^-1;for(var a=i;a<s;a++)e=e>>>8^n[(e^r[a])&255];return e^-1}function mi(e,r,t,i){var n=Rr,s=i+t;e=e^-1;for(var a=i;a<s;a++)e=e>>>8^n[(e^r.charCodeAt(a))&255];return e^-1}Br.exports=function(r,t){if(typeof r>"u"||!r.length)return 0;var i=li.getTypeOf(r)!=="string";return i?pi(t|0,r,r.length,0):mi(t|0,r,r.length,0)}});var Ve=f((Tn,qr)=>{"use strict";var Pr=y(),vi=de(),yi=l();function Xe(){Pr.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}yi.inherits(Xe,Pr);Xe.prototype.processChunk=function(e){this.streamInfo.crc32=vi(e.data,this.streamInfo.crc32||0),this.push(e)};qr.exports=Xe});var me=f((Dn,Ur)=>{"use strict";var zr=M(),Lr=Me(),pe=Ye(),gi=Ve(),pe=Ye();function Ge(e,r,t,i,n){this.compressedSize=e,this.uncompressedSize=r,this.crc32=t,this.compression=i,this.compressedContent=n}Ge.prototype={getContentWorker:function(){var e=new Lr(zr.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new pe("data_length")),r=this;return e.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new Lr(zr.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Ge.createWorkerFrom=function(e,r,t){return e.pipe(new gi).pipe(new pe("uncompressedSize")).pipe(r.compressWorker(t)).pipe(new pe("compressedSize")).withStreamInfo("compression",r)};Ur.exports=Ge});var Mr=f((Rn,Zr)=>{"use strict";var xi=We(),Ci=Me(),Ke=z(),Je=me(),Nr=y(),Qe=function(e,r,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=r,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}};Qe.prototype={internalStream:function(e){var r=null,t="string";try{if(!e)throw new Error("No output type specified.");t=e.toLowerCase();var i=t==="string"||t==="text";(t==="binarystring"||t==="text")&&(t="string"),r=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(r=r.pipe(new Ke.Utf8EncodeWorker)),!n&&i&&(r=r.pipe(new Ke.Utf8DecodeWorker))}catch(s){r=new Nr("error"),r.error(s)}return new xi(r,t,"")},async:function(e,r){return this.internalStream(e).accumulate(r)},nodeStream:function(e,r){return this.internalStream(e||"nodebuffer").toNodejsStream(r)},_compressWorker:function(e,r){if(this._data instanceof Je&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new Ke.Utf8EncodeWorker)),Je.createWorkerFrom(t,e,r)},_decompressWorker:function(){return this._data instanceof Je?this._data.getContentWorker():this._data instanceof Nr?this._data:new Ci(this._data)}};var Wr=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Si=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(ve=0;ve<Wr.length;ve++)Qe.prototype[Wr[ve]]=Si;var ve;Zr.exports=Qe});var Hr=f(ge=>{"use strict";var wi=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",Ei=Q("pako"),jr=l(),ye=y(),bi=wi?"uint8array":"array";ge.magic="\b\0";function U(e,r){ye.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=r,this.meta={}}jr.inherits(U,ye);U.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(jr.transformTo(bi,e.data),!1)};U.prototype.flush=function(){ye.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};U.prototype.cleanUp=function(){ye.prototype.cleanUp.call(this),this._pako=null};U.prototype._createPako=function(){this._pako=new Ei[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(r){e.push({data:r,meta:e.meta})}};ge.compressWorker=function(e){return new U("Deflate",e)};ge.uncompressWorker=function(){return new U("Inflate",{})}});var er=f($e=>{"use strict";var Yr=y();$e.STORE={magic:"\0\0",compressWorker:function(e){return new Yr("STORE compression")},uncompressWorker:function(){return new Yr("STORE decompression")}};$e.DEFLATE=Hr()});var rr=f(N=>{"use strict";N.LOCAL_FILE_HEADER="PK";N.CENTRAL_FILE_HEADER="PK";N.CENTRAL_DIRECTORY_END="PK";N.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";N.ZIP64_CENTRAL_DIRECTORY_END="PK";N.DATA_DESCRIPTOR="PK\x07\b"});var Kr=f((zn,Gr)=>{"use strict";var X=l(),V=y(),tr=z(),Xr=de(),xe=rr(),c=function(e,r){var t="",i;for(i=0;i<r;i++)t+=String.fromCharCode(e&255),e=e>>>8;return t},Ai=function(e,r){var t=e;return e||(t=r?16893:33204),(t&65535)<<16},_i=function(e,r){return(e||0)&63},Vr=function(e,r,t,i,n,s){var a=e.file,o=e.compression,u=s!==tr.utf8encode,h=X.transformTo("string",s(a.name)),p=X.transformTo("string",tr.utf8encode(a.name)),m=a.comment,g=X.transformTo("string",s(m)),lr=X.transformTo("string",tr.utf8encode(m)),dr=p.length!==a.name.length,pr=lr.length!==m.length,b,A,J="",Ae="",_e="",ke=a.dir,W=a.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};(!r||t)&&(Z.crc32=e.crc32,Z.compressedSize=e.compressedSize,Z.uncompressedSize=e.uncompressedSize);var Ie=0;r&&(Ie|=8),!u&&(dr||pr)&&(Ie|=2048);var se=0,Oe=0;ke&&(se|=16),n==="UNIX"?(Oe=798,se|=Ai(a.unixPermissions,ke)):(Oe=20,se|=_i(a.dosPermissions,ke)),b=W.getUTCHours(),b=b<<6,b=b|W.getUTCMinutes(),b=b<<5,b=b|W.getUTCSeconds()/2,A=W.getUTCFullYear()-1980,A=A<<4,A=A|W.getUTCMonth()+1,A=A<<5,A=A|W.getUTCDate(),dr&&(Ae=c(1,1)+c(Xr(h),4)+p,J+="up"+c(Ae.length,2)+Ae),pr&&(_e=c(1,1)+c(Xr(g),4)+lr,J+="uc"+c(_e.length,2)+_e);var x="";x+=`
\0`,x+=c(Ie,2),x+=o.magic,x+=c(b,2),x+=c(A,2),x+=c(Z.crc32,4),x+=c(Z.compressedSize,4),x+=c(Z.uncompressedSize,4),x+=c(h.length,2),x+=c(J.length,2);var Lt=xe.LOCAL_FILE_HEADER+x+h+J,Ut=xe.CENTRAL_FILE_HEADER+c(Oe,2)+x+c(g.length,2)+"\0\0\0\0"+c(se,4)+c(i,4)+h+J+g;return{fileRecord:Lt,dirRecord:Ut}},ki=function(e,r,t,i,n){var s="",a=X.transformTo("string",n(i));return s=xe.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(e,2)+c(e,2)+c(r,4)+c(t,4)+c(a.length,2)+a,s},Ii=function(e){var r="";return r=xe.DATA_DESCRIPTOR+c(e.crc32,4)+c(e.compressedSize,4)+c(e.uncompressedSize,4),r};function w(e,r,t,i){V.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=t,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}X.inherits(w,V);w.prototype.push=function(e){var r=e.meta.percent||0,t=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,V.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(r+100*(t-i-1))/t:100}}))};w.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var r=this.streamFiles&&!e.file.dir;if(r){var t=Vr(e,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0};w.prototype.closedSource=function(e){this.accumulate=!1;var r=this.streamFiles&&!e.file.dir,t=Vr(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),r)this.push({data:Ii(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};w.prototype.flush=function(){for(var e=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var t=this.bytesWritten-e,i=ki(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})};w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};w.prototype.registerPrevious=function(e){this._sources.push(e);var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()}),e.on("error",function(t){r.error(t)}),this};w.prototype.resume=function(){if(!V.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};w.prototype.error=function(e){var r=this._sources;if(!V.prototype.error.call(this,e))return!1;for(var t=0;t<r.length;t++)try{r[t].error(e)}catch{}return!0};w.prototype.lock=function(){V.prototype.lock.call(this);for(var e=this._sources,r=0;r<e.length;r++)e[r].lock()};Gr.exports=w});var Qr=f(Jr=>{"use strict";var Oi=er(),Fi=Kr(),Ti=function(e,r){var t=e||r,i=Oi[t];if(!i)throw new Error(t+" is not a valid compression method !");return i};Jr.generateWorker=function(e,r,t){var i=new Fi(r.streamFiles,t,r.platform,r.encodeFileName),n=0;try{e.forEach(function(s,a){n++;var o=Ti(a.options.compression,r.compression),u=a.options.compressionOptions||r.compressionOptions||{},h=a.dir,p=a.date;a._compressWorker(o,u).withStreamInfo("file",{name:s,dir:h,date:p,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(i)}),i.entriesCount=n}catch(s){i.error(s)}return i}});var et=f((Un,$r)=>{"use strict";var Di=l(),Ce=y();function ie(e,r){Ce.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(r)}Di.inherits(ie,Ce);ie.prototype._bindStream=function(e){var r=this;this._stream=e,e.pause(),e.on("data",function(t){r.push({data:t,meta:{percent:0}})}).on("error",function(t){r.isPaused?this.generatedError=t:r.error(t)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})};ie.prototype.pause=function(){return Ce.prototype.pause.call(this)?(this._stream.pause(),!0):!1};ie.prototype.resume=function(){return Ce.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};$r.exports=ie});var ht=f((Nn,ft)=>{"use strict";var Ri=z(),ne=l(),nt=y(),Bi=We(),st=Ze(),rt=me(),Pi=Mr(),qi=Qr(),tt=$(),zi=et(),at=function(e,r,t){var i=ne.getTypeOf(r),n,s=ne.extend(t||{},st);s.date=s.date||new Date,s.compression!==null&&(s.compression=s.compression.toUpperCase()),typeof s.unixPermissions=="string"&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&s.unixPermissions&16384&&(s.dir=!0),s.dosPermissions&&s.dosPermissions&16&&(s.dir=!0),s.dir&&(e=ot(e)),s.createFolders&&(n=Li(e))&&ut.call(this,n,!0);var a=i==="string"&&s.binary===!1&&s.base64===!1;(!t||typeof t.binary>"u")&&(s.binary=!a);var o=r instanceof rt&&r.uncompressedSize===0;(o||s.dir||!r||r.length===0)&&(s.base64=!1,s.binary=!0,r="",s.compression="STORE",i="string");var u=null;r instanceof rt||r instanceof nt?u=r:tt.isNode&&tt.isStream(r)?u=new zi(e,r):u=ne.prepareContent(e,r,s.binary,s.optimizedBinaryString,s.base64);var h=new Pi(e,u,s);this.files[e]=h},Li=function(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));var r=e.lastIndexOf("/");return r>0?e.substring(0,r):""},ot=function(e){return e.slice(-1)!=="/"&&(e+="/"),e},ut=function(e,r){return r=typeof r<"u"?r:st.createFolders,e=ot(e),this.files[e]||at.call(this,e,null,{dir:!0,createFolders:r}),this.files[e]};function it(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Ui={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var r,t,i;for(r in this.files)this.files.hasOwnProperty(r)&&(i=this.files[r],t=r.slice(this.root.length,r.length),t&&r.slice(0,this.root.length)===this.root&&e(t,i))},filter:function(e){var r=[];return this.forEach(function(t,i){e(t,i)&&r.push(i)}),r},file:function(e,r,t){if(arguments.length===1)if(it(e)){var i=e;return this.filter(function(s,a){return!a.dir&&i.test(s)})}else{var n=this.files[this.root+e];return n&&!n.dir?n:null}else e=this.root+e,at.call(this,e,r,t);return this},folder:function(e){if(!e)return this;if(it(e))return this.filter(function(n,s){return s.dir&&e.test(n)});var r=this.root+e,t=ut.call(this,r),i=this.clone();return i.root=t.name,i},remove:function(e){e=this.root+e;var r=this.files[e];if(r||(e.slice(-1)!=="/"&&(e+="/"),r=this.files[e]),r&&!r.dir)delete this.files[e];else for(var t=this.filter(function(n,s){return s.name.slice(0,e.length)===e}),i=0;i<t.length;i++)delete this.files[t[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var r,t={};try{if(t=ne.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Ri.utf8encode}),t.type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),t.type==="binarystring"&&(t.type="string"),!t.type)throw new Error("No output type specified.");ne.checkSupport(t.type),(t.platform==="darwin"||t.platform==="freebsd"||t.platform==="linux"||t.platform==="sunos")&&(t.platform="UNIX"),t.platform==="win32"&&(t.platform="DOS");var i=t.comment||this.comment||"";r=qi.generateWorker(this,t,i)}catch(n){r=new nt("error"),r.error(n)}return new Bi(r,t.type||"string",t.mimeType)},generateAsync:function(e,r){return this.generateInternalStream(e).accumulate(r)},generateNodeStream:function(e,r){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(r)}};ft.exports=Ui});var ir=f((Wn,lt)=>{"use strict";var Ni=l();function ct(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}ct.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var r=0,t;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return Ni.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))}};lt.exports=ct});var nr=f((Zn,pt)=>{"use strict";var dt=ir(),Wi=l();function G(e){dt.call(this,e);for(var r=0;r<this.data.length;r++)e[r]=e[r]&255}Wi.inherits(G,dt);G.prototype.byteAt=function(e){return this.data[this.zero+e]};G.prototype.lastIndexOfSignature=function(e){for(var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===r&&this.data[s+1]===t&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1};G.prototype.readAndCheckSignature=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),s=this.readData(4);return r===s[0]&&t===s[1]&&i===s[2]&&n===s[3]};G.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};pt.exports=G});var yt=f((Mn,vt)=>{"use strict";var mt=ir(),Zi=l();function K(e){mt.call(this,e)}Zi.inherits(K,mt);K.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};K.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};K.prototype.readAndCheckSignature=function(e){var r=this.readData(4);return e===r};K.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};vt.exports=K});var ar=f((jn,xt)=>{"use strict";var gt=nr(),Mi=l();function sr(e){gt.call(this,e)}Mi.inherits(sr,gt);sr.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};xt.exports=sr});var wt=f((Hn,St)=>{"use strict";var Ct=ar(),ji=l();function or(e){Ct.call(this,e)}ji.inherits(or,Ct);or.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};St.exports=or});var ur=f((Yn,bt)=>{"use strict";var Se=l(),Et=k(),Hi=nr(),Yi=yt(),Xi=wt(),Vi=ar();bt.exports=function(e){var r=Se.getTypeOf(e);return Se.checkSupport(r),r==="string"&&!Et.uint8array?new Yi(e):r==="nodebuffer"?new Xi(e):Et.uint8array?new Vi(Se.transformTo("uint8array",e)):new Hi(Se.transformTo("array",e))}});var It=f((Xn,kt)=>{"use strict";var fr=ur(),R=l(),Gi=me(),At=de(),we=z(),Ee=er(),Ki=k(),Ji=0,Qi=3,$i=function(e){for(var r in Ee)if(Ee.hasOwnProperty(r)&&Ee[r].magic===e)return Ee[r];return null};function _t(e,r){this.options=e,this.loadOptions=r}_t.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(e){var r,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(r=$i(this.compressionMethod),r===null)throw new Error("Corrupted zip : compression "+R.pretty(this.compressionMethod)+" unknown (inner file : "+R.transformTo("string",this.fileName)+")");this.decompressed=new Gi(this.compressedSize,this.uncompressedSize,this.crc32,r,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var r=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(r),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),e===Ji&&(this.dosPermissions=this.externalFileAttributes&63),e===Qi&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var r=fr(this.extraFields[1].value);this.uncompressedSize===R.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===R.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===R.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===R.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(e){var r=e.index+this.extraFieldsLength,t,i,n;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[t]={id:t,length:i,value:n};e.setIndex(r)},handleUTF8:function(){var e=Ki.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=we.utf8decode(this.fileName),this.fileCommentStr=we.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(r!==null)this.fileNameStr=r;else{var t=R.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var i=this.findExtraFieldUnicodeComment();if(i!==null)this.fileCommentStr=i;else{var n=R.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var r=fr(e.value);return r.readInt(1)!==1||At(this.fileName)!==r.readInt(4)?null:we.utf8decode(r.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var r=fr(e.value);return r.readInt(1)!==1||At(this.fileComment)!==r.readInt(4)?null:we.utf8decode(r.readData(e.length-5))}return null}};kt.exports=_t});var Tt=f((Gn,Ft)=>{"use strict";var en=ur(),O=l(),E=rr(),rn=It(),Vn=z(),tn=k();function Ot(e){this.files=[],this.loadOptions=e}Ot.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+O.pretty(r)+", expected "+O.pretty(e)+")")}},isSignature:function(e,r){var t=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4),n=i===r;return this.reader.setIndex(t),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),r=tn.uint8array?"uint8array":"array",t=O.transformTo(r,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,r=0,t,i,n;r<e;)t=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readData(i),this.zip64ExtensibleData[t]={id:t,length:i,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,r;for(e=0;e<this.files.length;e++)r=this.files[e],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(E.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(E.CENTRAL_FILE_HEADER);)e=new rn({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(E.CENTRAL_DIRECTORY_END);if(e<0){var r=!this.isSignature(0,E.LOCAL_FILE_HEADER);throw r?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(e);var t=e;if(this.checkSignature(E.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===O.MAX_VALUE_16BITS||this.diskWithCentralDirStart===O.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===O.MAX_VALUE_16BITS||this.centralDirRecords===O.MAX_VALUE_16BITS||this.centralDirSize===O.MAX_VALUE_32BITS||this.centralDirOffset===O.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(E.ZIP64_CENTRAL_DIRECTORY_LOCATOR),e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(E.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,E.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(E.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(E.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=t-i;if(n>0)this.isSignature(t,E.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=en(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};Ft.exports=Ot});var Bt=f((Kn,Rt)=>{"use strict";var hr=l(),be=M(),nn=z(),hr=l(),sn=Tt(),an=Ve(),Dt=$();function on(e){return new be.Promise(function(r,t){var i=e.decompressed.getContentWorker().pipe(new an);i.on("error",function(n){t(n)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}Rt.exports=function(e,r){var t=this;return r=hr.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:nn.utf8decode}),Dt.isNode&&Dt.isStream(e)?be.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):hr.prepareContent("the loaded zip file",e,!0,r.optimizedBinaryString,r.base64).then(function(i){var n=new sn(r);return n.load(i),n}).then(function(n){var s=[be.Promise.resolve(n)],a=n.files;if(r.checkCRC32)for(var o=0;o<a.length;o++)s.push(on(a[o]));return be.Promise.all(s)}).then(function(n){for(var s=n.shift(),a=s.files,o=0;o<a.length;o++){var u=a[o];t.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:r.createFolders})}return s.zipComment.length&&(t.comment=s.zipComment),t})}});var cr=f((Jn,Pt)=>{"use strict";function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new C;for(var r in this)typeof this[r]!="function"&&(e[r]=this[r]);return e}}C.prototype=ht();C.prototype.loadAsync=Bt();C.support=k();C.defaults=Ze();C.version="3.5.0";C.loadAsync=function(e,r){return new C().loadAsync(e,r)};C.external=M();Pt.exports=C});var B={};Ht(B,{default:()=>mn,defaults:()=>hn,external:()=>dn,loadAsync:()=>ln,prototype:()=>un,support:()=>fn,version:()=>cn});var zt=mr(cr());P(B,mr(cr()));var{prototype:un,support:fn,defaults:hn,version:cn,loadAsync:ln,external:dn}=zt,{default:qt,...pn}=zt,mn=qt!==void 0?qt:pn;export{mn as default,hn as defaults,dn as external,ln as loadAsync,un as prototype,fn as support,cn as version};
//# sourceMappingURL=jszip.mjs.map